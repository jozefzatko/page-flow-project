# Page Flow
1. /develop/apps GET
2. /settings GET

## /develop/apps GET

#### AppController
```
public List<AppSummary> list(Account account){
    return connectedAppRepository.findAppSummaries(account.getId());
}
```

#### src//main//webapp///WEB-INF/views/develop/apps/list.jsp
```
<%@ page session="false" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%@ taglib uri="http://www.springframework.org/tags" prefix="s" %>
<%@ taglib prefix="fn" uri="http://java.sun.com/jsp/jstl/functions" %>
<%@ taglib tagdir="/WEB-INF/tags/develop/apps" prefix="apps" %>

<h2>Greenhouse Apps</h2>

<c:if test="${fn:length(appSummaryList) == 0}">
<p>You have not registered any apps.</p>
</c:if>
<c:if test="${fn:length(appSummaryList) > 0}">
<p>You have registered the following apps:</p>
</c:if>

<c:forEach var="appSummary" items="${appSummaryList}">
<ul class="listings">
	<li><apps:summary value="${appSummary}" /></li>
</ul>
</c:forEach>

<a href="<c:url value="/develop/apps/new" />">Register App</a>

```

## /settings GET

#### SettingsController
```
public void settingsPage(Account account, Model model){
    // TODO: Fix this query
    List<Map<String, Object>> apps = jdbcTemplate.queryForList("select a.name as name, c.token_id as accessToken from App a, oauth_access_token c where c.client_id = a.apiKey and c.user_name = ?", account.getId() + "");
    model.addAttribute("apps", apps);
}
```

#### src//main//webapp///WEB-INF/views/settings/settings.jsp
```
<%@ page session="false" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%@ taglib uri="http://www.springframework.org/tags" prefix="s" %>

<h2>Settings</h2>

<h3>Connected Accounts</h3>
<ul id="connectedAccounts" class="listings">
	<li class="listing">
		<h4><img src="<c:url value="/resources/social/twitter/logo.png" />" alt="Twitter"></h4>
		<a href="<c:url value="/connect/twitter" />">Connect to Twitter</a>	
	</li>
	<li class="listing">
		<h4><img src="<c:url value="/resources/social/facebook/logo.png" />" alt="Facebook"></h4>
		<a href="<c:url value="/connect/facebook" />">Connect to Facebook</a>	
	</li>
	<li class="listing">
		<h4><img src="<c:url value="/resources/social/linkedin/logo.png" />" alt="Linked In"></h4>
		<a href="<c:url value="/connect/linkedin" />">Connect to LinkedIn</a>	
	</li>
	<li class="listing">
		<h4><img src="<c:url value="/resources/social/tripit/logo.png" />" alt="TripIt"></h4>
		<a href="<c:url value="/connect/tripit" />">Connect to TripIt</a>	
	</li>
</ul>

<div id="connectedApps">
	<h3>Connected Apps</h3>
	<ul class="listings">
		<c:forEach var="app" items="${apps}">
		<li>
			<h4>${app.name}</h4>
			<form action="settings/apps/${app.accessToken}" method="post">
				<p><button type="submit">Disconnect</button></p>
				<input type="hidden" name="_method" value="DELETE" />
			</form>
		</li>
		</c:forEach>
	</ul>
</div>

```

